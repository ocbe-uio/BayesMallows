<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="BayesMallows">
<title>MCMC with Parallel Chains • BayesMallows</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MCMC with Parallel Chains">
<meta property="og:description" content="BayesMallows">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BayesMallows</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/BayesMallows.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/SMC-Mallows.html">Sequential Inference with the Mallows Model</a>
    <a class="dropdown-item" href="../articles/parallel_chains.html">MCMC with Parallel Chains</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ocbe-uio/BayesMallows/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>MCMC with Parallel Chains</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ocbe-uio/BayesMallows/blob/HEAD/vignettes/parallel_chains.Rmd" class="external-link"><code>vignettes/parallel_chains.Rmd</code></a></small>
      <div class="d-none name"><code>parallel_chains.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ocbe-uio/BayesMallows" class="external-link">BayesMallows</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette describes how to run Markov chain Monte Carlo with
parallel chains. For an introduction to the “BayesMallows” package,
please see <span class="citation">Sørensen et al. (<a href="#ref-sorensen2020" role="doc-biblioref">2020</a>)</span>.</p>
<div class="section level3">
<h3 id="why-parallel-chains">Why Parallel Chains?<a class="anchor" aria-label="anchor" href="#why-parallel-chains"></a>
</h3>
<p>Modern computers have multiple cores, and on computing clusters one
can get access to hundreds of cores easily. By running Markov Chains in
parallel on <span class="math inline">\(K\)</span> cores, ideally from
different starting points, we achieve at least the following:</p>
<ol style="list-style-type: decimal">
<li><p>The time you have to wait to get the required number of
post-burnin samples scales like <span class="math inline">\(1/K\)</span>.</p></li>
<li><p>You can check convergence by comparing chains.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="parallel-chains-with-complete-rankings">Parallel Chains with Complete Rankings<a class="anchor" aria-label="anchor" href="#parallel-chains-with-complete-rankings"></a>
</h3>
<p>In “BayesMallows” we use the “parallel” package for parallel
computation. Parallelization is obtained by starting a cluster and
providing it as an argument. Since the limit to parallelism for
vignettes being built on CRAN is 2, we here start a cluster spanning two
cores, but in real applications this number should typically be larger
(the output from <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code> can be a good
guide). Note that we also give one initial value of the dispersion
parameter <span class="math inline">\(\alpha\)</span> to each chain.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_mallows.html">compute_mallows</a></span><span class="op">(</span></span>
<span>  rankings <span class="op">=</span> <span class="va">potato_visual</span>, nmc <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></code></pre></div>
<p>We can assess convergence in the usual way:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>We can also assess convergence for the latent ranks <span class="math inline">\(\boldsymbol{\rho}\)</span>. Since the initial
value of <span class="math inline">\(\boldsymbol{\rho}\)</span> is
sampled uniformly, the two chains automatically get different initial
values.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Based on the convergence plots, we set the burnin to 700.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">burnin</span> <span class="op">&lt;-</span> <span class="fl">700</span></span></code></pre></div>
<p>We can now use all the tools for assessing the posterior
distributions as usual. The post-burnin samples for all parallel chains
are simply combined, as they should be.</p>
<p>Below is a plot of the posterior distribution of <span class="math inline">\(\alpha\)</span>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Next is a plot of the posterior distribution of <span class="math inline">\(\boldsymbol{\rho}\)</span>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="parallel-chains-with-pairwise-preferences">Parallel Chains with Pairwise Preferences<a class="anchor" aria-label="anchor" href="#parallel-chains-with-pairwise-preferences"></a>
</h3>
<p>A case where parallel chains might be more strongly needed is with
incomplete data, e.g., arising from pairwise preferences. In this case
the MCMC algorithm needs to perform data augmentation, which tends to be
both slow and sticky. We illustrate this with the beach preference data,
again referring to <span class="citation">Sørensen et al. (<a href="#ref-sorensen2020" role="doc-biblioref">2020</a>)</span> for a
more thorough introduction to the aspects not directly related to
parallelism.</p>
<p>We start by generating the transitive closure:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">beach_tc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_transitive_closure.html">generate_transitive_closure</a></span><span class="op">(</span><span class="va">beach_preferences</span><span class="op">)</span></span></code></pre></div>
<p>Next we run two parallel chains, letting the package generate random
initial rankings, but again providing a vector of initial values for
<span class="math inline">\(\alpha\)</span>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_mallows.html">compute_mallows</a></span><span class="op">(</span></span>
<span>  preferences <span class="op">=</span> <span class="va">beach_tc</span>, nmc <span class="op">=</span> <span class="fl">4000</span>,</span>
<span>  alpha_init <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  save_aug <span class="op">=</span> <span class="cn">TRUE</span>, cl <span class="op">=</span> <span class="va">cl</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Generating initial ranking.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="trace-plots">Trace Plots<a class="anchor" aria-label="anchor" href="#trace-plots"></a>
</h4>
<p>The convergence plots shows some long-range autocorrelation, but
otherwise it seems to mix relatively well.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Here is the convergence plot for <span class="math inline">\(\boldsymbol{\rho}\)</span>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>To avoid overplotting, it’s a good idea to pick a low number of
assessors and chains. We here look at items 1-3 of assessors 1 and
2.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">"Rtilde"</span>,</span>
<span>  items <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, assessors <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="posterior-quantities">Posterior Quantities<a class="anchor" aria-label="anchor" href="#posterior-quantities"></a>
</h4>
<p>Based on the trace plots, the chains seem to be mixing well. We set
the burnin to 700 again.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">burnin</span> <span class="op">&lt;-</span> <span class="fl">700</span></span></code></pre></div>
<p>We can now study the posterior distributions. Here is the posterior
for <span class="math inline">\(\alpha\)</span>. Note that by increasing
the <code>nmc</code> argument to <code>compute_mallows</code> above, the
density would appear smoother. In this vignette we have kept it low to
reduce the run time.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>We can also look at the posterior for <span class="math inline">\(\boldsymbol{\rho}\)</span>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>We can also compute posterior intervals in the usual way:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_posterior_intervals.html">compute_posterior_intervals</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"alpha"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   parameter  mean median conf_level          hpdi central_interval</span></span>
<span><span class="co">#&gt; 1     alpha 4.808  4.801       95 % [4.258,5.376]    [4.265,5.389]</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_posterior_intervals.html">compute_posterior_intervals</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span><span class="op">)</span></span>
<span><span class="co">#&gt;       item parameter mean median conf_level    hpdi central_interval</span></span>
<span><span class="co">#&gt; 1   Item 1       rho    7      7       95 %   [6,7]            [6,7]</span></span>
<span><span class="co">#&gt; 2   Item 2       rho   15     15       95 %    [15]             [15]</span></span>
<span><span class="co">#&gt; 3   Item 3       rho    3      3       95 %   [3,4]            [3,4]</span></span>
<span><span class="co">#&gt; 4   Item 4       rho   12     12       95 % [11,13]          [11,13]</span></span>
<span><span class="co">#&gt; 5   Item 5       rho    9      8       95 %  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 6   Item 6       rho    2      2       95 %   [1,2]            [1,2]</span></span>
<span><span class="co">#&gt; 7   Item 7       rho    9      9       95 %  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 8   Item 8       rho   12     11       95 % [11,13]          [11,13]</span></span>
<span><span class="co">#&gt; 9   Item 9       rho    1      1       95 %   [1,2]            [1,2]</span></span>
<span><span class="co">#&gt; 10 Item 10       rho    6      6       95 %   [6,7]            [6,7]</span></span>
<span><span class="co">#&gt; 11 Item 11       rho    4      4       95 %   [3,5]            [3,5]</span></span>
<span><span class="co">#&gt; 12 Item 12       rho   13     13       95 % [12,14]          [12,14]</span></span>
<span><span class="co">#&gt; 13 Item 13       rho    9     10       95 %  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 14 Item 14       rho   14     14       95 % [12,14]          [12,14]</span></span>
<span><span class="co">#&gt; 15 Item 15       rho    5      5       95 %   [4,5]            [4,5]</span></span></code></pre></div>
<p>And we can compute the consensus ranking:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_consensus.html">compute_consensus</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;    ranking    item   cumprob</span></span>
<span><span class="co">#&gt; 1        1  Item 9 0.9151515</span></span>
<span><span class="co">#&gt; 2        2  Item 6 1.0000000</span></span>
<span><span class="co">#&gt; 3        3  Item 3 0.5810606</span></span>
<span><span class="co">#&gt; 4        4 Item 11 0.9239394</span></span>
<span><span class="co">#&gt; 5        5 Item 15 0.9887879</span></span>
<span><span class="co">#&gt; 6        6 Item 10 0.8903030</span></span>
<span><span class="co">#&gt; 7        7  Item 1 1.0000000</span></span>
<span><span class="co">#&gt; 8        8  Item 5 0.5977273</span></span>
<span><span class="co">#&gt; 9        9  Item 7 0.6971212</span></span>
<span><span class="co">#&gt; 10      10 Item 13 1.0000000</span></span>
<span><span class="co">#&gt; 11      11  Item 8 0.6245455</span></span>
<span><span class="co">#&gt; 12      12  Item 4 0.6645455</span></span>
<span><span class="co">#&gt; 13      13 Item 12 0.7392424</span></span>
<span><span class="co">#&gt; 14      14 Item 14 1.0000000</span></span>
<span><span class="co">#&gt; 15      15  Item 2 1.0000000</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_consensus.html">compute_consensus</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"MAP"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    map_ranking    item probability</span></span>
<span><span class="co">#&gt; 1            1  Item 9    0.130303</span></span>
<span><span class="co">#&gt; 2            2  Item 6    0.130303</span></span>
<span><span class="co">#&gt; 3            3  Item 3    0.130303</span></span>
<span><span class="co">#&gt; 4            4 Item 11    0.130303</span></span>
<span><span class="co">#&gt; 5            5 Item 15    0.130303</span></span>
<span><span class="co">#&gt; 6            6 Item 10    0.130303</span></span>
<span><span class="co">#&gt; 7            7  Item 1    0.130303</span></span>
<span><span class="co">#&gt; 8            8  Item 7    0.130303</span></span>
<span><span class="co">#&gt; 9            9 Item 13    0.130303</span></span>
<span><span class="co">#&gt; 10          10  Item 5    0.130303</span></span>
<span><span class="co">#&gt; 11          11  Item 8    0.130303</span></span>
<span><span class="co">#&gt; 12          12 Item 12    0.130303</span></span>
<span><span class="co">#&gt; 13          13  Item 4    0.130303</span></span>
<span><span class="co">#&gt; 14          14 Item 14    0.130303</span></span>
<span><span class="co">#&gt; 15          15  Item 2    0.130303</span></span></code></pre></div>
<p>We can compute the probability of being top-<span class="math inline">\(k\)</span>, here for <span class="math inline">\(k=4\)</span>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_top_k.html">plot_top_k</a></span><span class="op">(</span><span class="va">fit</span>, k <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p><img src="parallel_chains_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-sorensen2020" class="csl-entry">
Sørensen, Øystein, Marta Crispino, Qinghua Liu, and Valeria Vitelli.
2020. <span>“<span>BayesMallows</span>: <span>An R Package</span> for
the <span>Bayesian Mallows Model</span>.”</span> <em>The R Journal</em>
12 (1): 324–42. <a href="https://doi.org/10.32614/RJ-2020-026" class="external-link">https://doi.org/10.32614/RJ-2020-026</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Oystein Sorensen, Valeria Vitelli, Marta Crispino, Qinghua Liu, Cristina Mollica, Luca Tardella, Anja Stein.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

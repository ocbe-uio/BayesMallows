<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MCMC with Parallel Chains ‚Ä¢ BayesMallows</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MCMC with Parallel Chains">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BayesMallows</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/BayesMallows.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/parallel_chains.html">MCMC with Parallel Chains</a></li>
    <li><a class="dropdown-item" href="../articles/SMC-Mallows.html">Sequential Monte Carlo for the Bayesian Mallows model</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ocbe-uio/BayesMallows/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MCMC with Parallel Chains</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ocbe-uio/BayesMallows/blob/v2.2.2/vignettes/parallel_chains.Rmd" class="external-link"><code>vignettes/parallel_chains.Rmd</code></a></small>
      <div class="d-none name"><code>parallel_chains.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ocbe-uio/BayesMallows" class="external-link">BayesMallows</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></code></pre></div>
<p>This vignette describes how to run Markov chain Monte Carlo with
parallel chains. For an introduction to the ‚ÄúBayesMallows‚Äù package,
please see <a href="https://ocbe-uio.github.io/BayesMallows/articles/BayesMallows.html" class="external-link">the
introductory vignette</a>, which is an updated version of <span class="citation">S√∏rensen et al. (<a href="#ref-sorensen2020">2020</a>)</span>. For parallel processing of
particles with the sequential Monte Carlo algorithm of <span class="citation">Stein (<a href="#ref-steinSequentialInferenceMallows2023">2023</a>)</span>, see
the <a href="https://ocbe-uio.github.io/BayesMallows/articles/SMC-Mallows.html" class="external-link">SMC
vignette</a>.</p>
<div class="section level3">
<h3 id="why-parallel-chains">Why Parallel Chains?<a class="anchor" aria-label="anchor" href="#why-parallel-chains"></a>
</h3>
<p>Modern computers have multiple cores, and on computing clusters one
can get access to hundreds of cores easily. By running Markov Chains in
parallel on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>
cores, ideally from different starting points, we achieve at least the
following:</p>
<ol style="list-style-type: decimal">
<li><p>The time you have to wait to get the required number of
post-burnin samples scales like
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><mi>K</mi></mrow><annotation encoding="application/x-tex">1/K</annotation></semantics></math>.</p></li>
<li><p>You can check convergence by comparing chains.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="parallel-chains-with-complete-rankings">Parallel Chains with Complete Rankings<a class="anchor" aria-label="anchor" href="#parallel-chains-with-complete-rankings"></a>
</h3>
<p>In ‚ÄúBayesMallows‚Äù we use the ‚Äúparallel‚Äù package for parallel
computation. Parallelization is obtained by starting a cluster and
providing it as an argument. Note that we also give one initial value of
the dispersion parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Œ±</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
to each chain.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_mallows.html">compute_mallows</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="../reference/setup_rank_data.html">setup_rank_data</a></span><span class="op">(</span>rankings <span class="op">=</span> <span class="va">potato_visual</span><span class="op">)</span>, </span>
<span>  compute_options <span class="op">=</span> <span class="fu"><a href="../reference/set_compute_options.html">set_compute_options</a></span><span class="op">(</span>nmc <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></code></pre></div>
<p>We can assess convergence in the usual way:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_assess_convergence_alpha-1.png" alt="Trace plot of scale parameter for four chains."><div class="figcaption">Trace plot of scale parameter for four
chains.</div>
</div>
<p>We can also assess convergence for the latent ranks
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõí</mi><annotation encoding="application/x-tex">\boldsymbol{\rho}</annotation></semantics></math>.
Since the initial value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõí</mi><annotation encoding="application/x-tex">\boldsymbol{\rho}</annotation></semantics></math>
is sampled uniformly, the two chains automatically get different initial
values.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_assess_convergence_rho-1.png" alt="Trace plot of modal ranking for four chains."><div class="figcaption">Trace plot of modal ranking for four
chains.</div>
</div>
<p>Based on the convergence plots, we set the burnin to 3000.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/burnin.html">burnin</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span></code></pre></div>
<p>We can now use all the tools for assessing the posterior
distributions as usual. The post-burnin samples for all parallel chains
are simply combined, as they should be.</p>
<p>Below is a plot of the posterior distribution of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Œ±</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_posterior_alpha-1.png" alt="Posterior of scale parameter, combing post-burnin samples from all chains."><div class="figcaption">Posterior of scale parameter, combing
post-burnin samples from all chains.</div>
</div>
<p>Next is a plot of the posterior distribution of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõí</mi><annotation encoding="application/x-tex">\boldsymbol{\rho}</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_posterior_rho-1.png" alt="Posterior of modal ranking, combing post-burnin samples from all chains."><div class="figcaption">Posterior of modal ranking, combing post-burnin
samples from all chains.</div>
</div>
</div>
<div class="section level3">
<h3 id="parallel-chains-with-pairwise-preferences">Parallel Chains with Pairwise Preferences<a class="anchor" aria-label="anchor" href="#parallel-chains-with-pairwise-preferences"></a>
</h3>
<p>A case where parallel chains might be more strongly needed is with
incomplete data, e.g., arising from pairwise preferences. In this case
the MCMC algorithm needs to perform data augmentation, which tends to be
both slow and sticky. We illustrate this with the beach preference data,
again referring to <span class="citation">S√∏rensen et al. (<a href="#ref-sorensen2020">2020</a>)</span> for a more thorough
introduction to the aspects not directly related to parallelism.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">beach_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_rank_data.html">setup_rank_data</a></span><span class="op">(</span>preferences <span class="op">=</span> <span class="va">beach_preferences</span><span class="op">)</span></span></code></pre></div>
<p>We run four parallel chains, letting the package generate random
initial rankings, but again providing a vector of initial values for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Œ±</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_mallows.html">compute_mallows</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">beach_data</span>,</span>
<span>  compute_options <span class="op">=</span> <span class="fu"><a href="../reference/set_compute_options.html">set_compute_options</a></span><span class="op">(</span>nmc <span class="op">=</span> <span class="fl">4000</span>, save_aug <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  initial_values <span class="op">=</span> <span class="fu"><a href="../reference/set_initial_values.html">set_initial_values</a></span><span class="op">(</span>alpha_init <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">stopCluster</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="trace-plots">Trace Plots<a class="anchor" aria-label="anchor" href="#trace-plots"></a>
</h4>
<p>The convergence plots shows some long-range autocorrelation, but
otherwise it seems to mix relatively well.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_assess_converge_prefs_alpha-1.png" alt="Trace plot of scale parameter for beach preferences data, on four chains."><div class="figcaption">Trace plot of scale parameter for beach
preferences data, on four chains.</div>
</div>
<p>Here is the convergence plot for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõí</mi><annotation encoding="application/x-tex">\boldsymbol{\rho}</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_assess_converge_prefs_rho-1.png" alt="Trace plot of modal ranking for beach preferences data, on four chains."><div class="figcaption">Trace plot of modal ranking for beach
preferences data, on four chains.</div>
</div>
<p>To avoid overplotting, it‚Äôs a good idea to pick a low number of
assessors and chains. We here look at items 1-3 of assessors 1 and
2.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/assess_convergence.html">assess_convergence</a></span><span class="op">(</span><span class="va">fit</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">"Rtilde"</span>,</span>
<span>  items <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, assessors <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_assess_convergence_prefs_rtilde-1.png" alt="Trace plot of augmented rankings for beach preference data, on four chains."><div class="figcaption">Trace plot of augmented rankings for beach
preference data, on four chains.</div>
</div>
</div>
<div class="section level4">
<h4 id="posterior-quantities">Posterior Quantities<a class="anchor" aria-label="anchor" href="#posterior-quantities"></a>
</h4>
<p>Based on the trace plots, the chains seem to be mixing well. We set
the burnin to 1000.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/burnin.html">burnin</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span></code></pre></div>
<p>We can now study the posterior distributions. Here is the posterior
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Œ±</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>.
Note that by increasing the <code>nmc</code> argument to
<code>compute_mallows</code> above, the density would appear smoother.
In this vignette we have kept it low to reduce the run time.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_beach_prefs_alpha_posterior-1.png" alt="Posterior distribution for scale parameter."><div class="figcaption">Posterior distribution for scale
parameter.</div>
</div>
<p>We can also look at the posterior for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ùõí</mi><annotation encoding="application/x-tex">\boldsymbol{\rho}</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span>, items <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_beach_prefs_rho_posterior-1.png" alt="Posterior distribution for modal rankings."><div class="figcaption">Posterior distribution for modal rankings.</div>
</div>
<p>We can also compute posterior intervals in the usual way:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_posterior_intervals.html">compute_posterior_intervals</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"alpha"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   parameter  mean median          hpdi central_interval</span></span>
<span><span class="co">#&gt; 1     alpha 4.798  4.793 [4.242,5.373]    [4.235,5.371]</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_posterior_intervals.html">compute_posterior_intervals</a></span><span class="op">(</span><span class="va">fit</span>, parameter <span class="op">=</span> <span class="st">"rho"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    parameter    item mean median    hpdi central_interval</span></span>
<span><span class="co">#&gt; 1        rho  Item 1    7      7     [7]            [6,7]</span></span>
<span><span class="co">#&gt; 2        rho  Item 2   15     15    [15]          [14,15]</span></span>
<span><span class="co">#&gt; 3        rho  Item 3    3      3   [3,4]            [3,4]</span></span>
<span><span class="co">#&gt; 4        rho  Item 4   11     11 [11,13]          [11,13]</span></span>
<span><span class="co">#&gt; 5        rho  Item 5    9      9  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 6        rho  Item 6    2      2   [1,2]            [1,2]</span></span>
<span><span class="co">#&gt; 7        rho  Item 7    9      8  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 8        rho  Item 8   12     12 [11,13]          [11,14]</span></span>
<span><span class="co">#&gt; 9        rho  Item 9    1      1   [1,2]            [1,2]</span></span>
<span><span class="co">#&gt; 10       rho Item 10    6      6   [5,6]            [5,7]</span></span>
<span><span class="co">#&gt; 11       rho Item 11    4      4   [3,5]            [3,5]</span></span>
<span><span class="co">#&gt; 12       rho Item 12   13     13 [12,14]          [11,14]</span></span>
<span><span class="co">#&gt; 13       rho Item 13   10     10  [8,10]           [8,10]</span></span>
<span><span class="co">#&gt; 14       rho Item 14   13     14 [12,14]          [12,14]</span></span>
<span><span class="co">#&gt; 15       rho Item 15    5      5   [4,5]            [4,6]</span></span></code></pre></div>
<p>And we can compute the consensus ranking:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_consensus.html">compute_consensus</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;      cluster ranking    item   cumprob</span></span>
<span><span class="co">#&gt; 1  Cluster 1       1  Item 9 0.8691667</span></span>
<span><span class="co">#&gt; 2  Cluster 1       2  Item 6 1.0000000</span></span>
<span><span class="co">#&gt; 3  Cluster 1       3  Item 3 0.6391667</span></span>
<span><span class="co">#&gt; 4  Cluster 1       4 Item 11 0.9404167</span></span>
<span><span class="co">#&gt; 5  Cluster 1       5 Item 15 0.9559167</span></span>
<span><span class="co">#&gt; 6  Cluster 1       6 Item 10 0.9636667</span></span>
<span><span class="co">#&gt; 7  Cluster 1       7  Item 1 1.0000000</span></span>
<span><span class="co">#&gt; 8  Cluster 1       8  Item 7 0.5473333</span></span>
<span><span class="co">#&gt; 9  Cluster 1       9  Item 5 0.9255833</span></span>
<span><span class="co">#&gt; 10 Cluster 1      10 Item 13 1.0000000</span></span>
<span><span class="co">#&gt; 11 Cluster 1      11  Item 4 0.6924167</span></span>
<span><span class="co">#&gt; 12 Cluster 1      12  Item 8 0.7833333</span></span>
<span><span class="co">#&gt; 13 Cluster 1      13 Item 12 0.6158333</span></span>
<span><span class="co">#&gt; 14 Cluster 1      14 Item 14 0.9958333</span></span>
<span><span class="co">#&gt; 15 Cluster 1      15  Item 2 1.0000000</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_consensus.html">compute_consensus</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"MAP"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      cluster map_ranking    item probability</span></span>
<span><span class="co">#&gt; 1  Cluster 1           1  Item 9   0.2683333</span></span>
<span><span class="co">#&gt; 2  Cluster 1           2  Item 6   0.2683333</span></span>
<span><span class="co">#&gt; 3  Cluster 1           3  Item 3   0.2683333</span></span>
<span><span class="co">#&gt; 4  Cluster 1           4 Item 11   0.2683333</span></span>
<span><span class="co">#&gt; 5  Cluster 1           5 Item 15   0.2683333</span></span>
<span><span class="co">#&gt; 6  Cluster 1           6 Item 10   0.2683333</span></span>
<span><span class="co">#&gt; 7  Cluster 1           7  Item 1   0.2683333</span></span>
<span><span class="co">#&gt; 8  Cluster 1           8  Item 7   0.2683333</span></span>
<span><span class="co">#&gt; 9  Cluster 1           9  Item 5   0.2683333</span></span>
<span><span class="co">#&gt; 10 Cluster 1          10 Item 13   0.2683333</span></span>
<span><span class="co">#&gt; 11 Cluster 1          11  Item 4   0.2683333</span></span>
<span><span class="co">#&gt; 12 Cluster 1          12  Item 8   0.2683333</span></span>
<span><span class="co">#&gt; 13 Cluster 1          13 Item 12   0.2683333</span></span>
<span><span class="co">#&gt; 14 Cluster 1          14 Item 14   0.2683333</span></span>
<span><span class="co">#&gt; 15 Cluster 1          15  Item 2   0.2683333</span></span></code></pre></div>
<p>We can compute the probability of being
top-<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>,
here for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">k=4</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_top_k.html">plot_top_k</a></span><span class="op">(</span><span class="va">fit</span>, k <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="parallel_top_k-1.png" alt="Probability of being top-4 for beach preference data."><div class="figcaption">Probability of being top-4 for beach preference
data.</div>
</div>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-sorensen2020" class="csl-entry">
S√∏rensen, √òystein, Marta Crispino, Qinghua Liu, and Valeria Vitelli.
2020. <span>‚Äú<span>BayesMallows</span>: <span>An R Package</span> for
the <span>Bayesian Mallows Model</span>.‚Äù</span> <em>The R Journal</em>
12 (1): 324‚Äì42. <a href="https://doi.org/10.32614/RJ-2020-026" class="external-link">https://doi.org/10.32614/RJ-2020-026</a>.
</div>
<div id="ref-steinSequentialInferenceMallows2023" class="csl-entry">
Stein, Anja. 2023. <span>‚ÄúSequential <span>Inference</span> with the
<span>Mallows Model</span>.‚Äù</span> PhD thesis, Lancaster University.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Oystein Sorensen, Waldir Leoncio, Valeria Vitelli, Marta Crispino, Qinghua Liu, Cristina Mollica, Luca Tardella, Anja Stein.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
